!function(){"use strict";var e=()=>'\n    <section class="catalog">\n  <div class="catalog__container">\n    <header class="catalog__header">\n      <h2 class="h2">Каталог</h2>\n    </header>\n\n    <div class="catalog__content">\n      <ul class="catalog-list" id="catalog-list"></ul>\n      \n      \x3c!-- Заменить див ниже на ul --\x3e\n      <ul class="catalog-cards" id="catalog-cards"></ul>\n    </div>\n\n  </div>\n</section>\n  ',n=(e,n)=>{const a=document.querySelector(n).querySelectorAll(".accordion__btn"),t=document.querySelectorAll(".accordion__item"),s=document.querySelectorAll(".accordion__content"),i=e=>{const n=e.closest(".accordion__item"),a=n.querySelector(".accordion__content");return{currentItem:n,currentContent:a}};console.log("hello from accordeon"),a.forEach((n=>n.addEventListener("click",(a=>((n,a)=>{switch(e){case"only":((e,n)=>{e.preventDefault();const{currentItem:a,currentContent:o}=i(n);a.classList.contains("active")?(a.classList.remove("active"),o.style.maxHeight=0):(t.forEach((e=>e.classList.remove("active"))),s.forEach((e=>e.style.maxHeight=0)),a.classList.add("active"),o.style.maxHeight=o.scrollHeight+"px"),console.log(o)})(n,a);break;case"many":((e,n)=>{e.preventDefault();const{currentItem:a,currentContent:t}=i(n);if(e.target.closest("a")&&e.target.closest("a").dataset){const n=e.target.closest("a").dataset;if("edit"===n.btn||"remove"===n.btn)return n.btn}a.classList.contains("active")?(a.classList.remove("active"),t.style.maxHeight=0,a.querySelector(".expand-icon")?.classList.remove("expand-icon--active")):(a.classList.add("active"),t.style.maxHeight=t.scrollHeight+"px",a.querySelector(".expand-icon")?.classList.add("expand-icon--active"))})(n,a)}})(a,n)))))},a=JSON.parse('[{"cat":"Админ панель","data":"home","icon":"inbox","subCat":[]},{"cat":"Каталог","data":"catalog","icon":"catalog","subCat":[]},{"cat":"Магазин","data":"shop","icon":"shop","subCat":[{"name":"Добавить товар","data":"shop-add"},{"name":"Все товары","data":"shop-all"},{"name":"Все бренды","data":"shop-brands"},{"name":"Все категории","data":"shop-cats"},{"name":"Заказы","data":"shop-orders"}]},{"cat":"Сообщения","data":"mail","icon":"mail","subCat":[]},{"cat":"Страницы","data":"pages","icon":"file","subCat":[{"name":"Главная","data":"main"},{"name":"Контакты","data":"contacts"}]},{"cat":"Настройки","data":"settings","icon":"settings","subCat":[]},{"cat":"Мой профиль","data":"user","icon":"user","subCat":[]},{"cat":"Выход","data":"logout","icon":"log-out","subCat":[]}]'),t=()=>{const e=a,t=document.querySelector("#sidebar-tab"),s=t.querySelector("#sidebar"),i=e.map((e=>{let n=`\n            <li class="sidebar__list-item">\n              <button class="sidebar__list-button" title="Перейти в раздел '${(a=e).cat}'" data-section="${a.data}">\n                <div class="sidebar__list-img-wrapper">\n                  <img class="sidebar__list-img" src="./../../img/svgsprite/stack/svg/sprite.stack.svg#${a.icon}" alt="Админ панель" />\n                </div>\n                ${a.cat}\n              </button>\n            </li>\n          `;var a;return e.subCat.length>0&&(n=(e=>`\n            <li class="sidebar__list-item accordion__item">\n              <button href="?shop" class="sidebar__list-button accordion__btn" \n                title="Перейти страницу редактирования магазина"\n                data-name="accordeon-title" data-section="${e.data}">\n                <div class="sidebar__list-img-wrapper">\n                  <img class="sidebar__list-img" src="./../../img/svgsprite/stack/svg/sprite.stack.svg#${e.icon}" alt="icon" />\n                  \x3c!-- <img class="sidebar__list-img" src="<?php echo HOST . 'static/img/svgsprite/stack/svg/sprite.stack.svg#shop';?>" alt="icon" /> --\x3e\n                </div>\n                ${e.cat}\n              </button>\n              <ul class="sidebar__list accordion__content">\n                ${e.subCat.map((e=>`\n                    <li class="sidebar__list-item">\n                      <button class="sidebar__list-button sidebar__inner-link" \n                          href="" title="Перейти на страницу редактирования главной страницы сайта" data-section="${e.data}">\n                          \x3c!-- href="<?php echo HOST;?>admin/main" title="Перейти на страницу редактирования главной страницы сайта"> --\x3e\n                        <div class="sidebar__list-img-wrapper">\n                          <img class="sidebar__list-img" src="./../../img/svgsprite/stack/svg/sprite.stack.svg#corner" alt="icon" />\n                          \x3c!-- <img class="sidebar__list-img" src="<?php echo HOST . 'static/img/svgsprite/stack/svg/sprite.stack.svg#about-me';?>" alt="icon" /> --\x3e\n                        </div>\n                        ${e.name}\n                      </button>\n                    </li>\n                  `)).join("")}   \n                </ul>\n              </li>\n            `)(e)),n})).join("");s&&(s.insertAdjacentHTML("beforeend",i),setTimeout((()=>n("many","#sidebar-tab")),0),t.addEventListener("click",(e=>{const n=e.target.closest("[data-section]");var a;n&&(console.log(e.target.closest("[data-section]")),a=n.dataset.section,console.log("hello from navigate"),history.pushState({},`Панель администратора - ${a}`,`?${a}`),c())})))},s=JSON.parse('[{"id":1,"name":"Для Женщин","parentId":0,"img":"01.jpeg"},{"id":-1,"name":"Все категории","parentId":1,"img":"category_all"},{"id":7,"name":"Сумки","parentId":1,"img":"bag"},{"id":71,"name":"Рюкзак","parentId":7,"img":""},{"id":72,"name":"Клатч","parentId":7,"img":""},{"id":73,"name":"Портмоне","parentId":7,"img":""},{"id":8,"name":"Очки","parentId":1,"img":"glasses"},{"id":81,"name":"Авиаторы","parentId":8,"img":""},{"id":82,"name":"Круглые","parentId":8,"img":""},{"id":83,"name":"Коллекционные","parentId":8,"img":""},{"id":9,"name":"Часы","parentId":1,"img":"watch"},{"id":91,"name":"На ремешке","parentId":9,"img":""},{"id":92,"name":"Металлические","parentId":9,"img":""},{"id":93,"name":"С драгоценными вставками","parentId":9,"img":""},{"id":10,"name":"Бижутерия","parentId":1,"img":"earrings"},{"id":101,"name":"Кольца","parentId":10,"img":""},{"id":102,"name":"Колье","parentId":10,"img":""},{"id":103,"name":"Серьги","parentId":10,"img":""},{"id":11,"name":"Косметика","parentId":1,"img":"cosmetics"},{"id":111,"name":"Крема","parentId":11,"img":""},{"id":112,"name":"Тушь","parentId":11,"img":""},{"id":113,"name":"Помада","parentId":11,"img":""},{"id":2,"name":"Для Мужчин","parentId":0,"img":"02.jpeg"},{"id":-2,"name":"Все категории","parentId":"2","img":"category_all"},{"id":13,"name":"Очки","parentId":2,"img":"glasses_men"},{"id":131,"name":"Авиаторы","parentId":13,"img":""},{"id":132,"name":"Круглые","parentId":13,"img":""},{"id":133,"name":"Коллекционные","parentId":13,"img":""},{"id":14,"name":"Часы","parentId":2,"img":"watch_man"},{"id":141,"name":"На ремешке","parentId":14,"img":""},{"id":142,"name":"Металлические","parentId":14,"img":""},{"id":143,"name":"Карманные","parentId":14,"img":""},{"id":15,"name":"Ремни","parentId":2,"img":"belt"},{"id":151,"name":"Кожаные","parentId":15,"img":""},{"id":152,"name":"Классика","parentId":15,"img":""},{"id":153,"name":"Разные","parentId":15,"img":""},{"id":16,"name":"Галстуки","parentId":2,"img":"necktie"},{"id":161,"name":"Классика","parentId":16,"img":""},{"id":162,"name":"Шёлковые","parentId":16,"img":""},{"id":163,"name":"Бабочка","parentId":16,"img":""},{"id":17,"name":"Сумки","parentId":2,"img":"suitcase"},{"id":171,"name":"Рюкзак","parentId":17,"img":""},{"id":172,"name":"На плечо","parentId":17,"img":""},{"id":173,"name":"Дипломат","parentId":17,"img":""},{"id":3,"name":"Для Детей","parentId":0,"img":"03.jpeg"},{"id":-3,"name":"Все категории","parentId":3,"img":"category_all"},{"id":18,"name":"Игрушки","parentId":3,"img":"toy"},{"id":181,"name":"Мягкие","parentId":18,"img":""},{"id":182,"name":"Пластмассовые","parentId":18,"img":""},{"id":183,"name":"Деревянные","parentId":18,"img":""}]'),i=(e,{triggerAttr:n="data-btn",menuSelector:a=".dropdownMenu"}={})=>{const t="string"==typeof e?document.querySelector(e):e;if(t._dropdownInited)return;t._dropdownInited=!0;const s=()=>{t.querySelectorAll(`${a}.open`).forEach((e=>e.classList.remove("open")))};document.addEventListener("click",(e=>(e=>{e.target.closest(a)||e.target.closest(`[${n}]`)||s()})(e))),document.addEventListener("keydown",(e=>{"Escape"===e.key&&s()})),t.addEventListener("click",(e=>{const i=e.target.closest(`[${n}]`);if(!i)return;e.preventDefault();const o=i.closest("li, .card")?i.closest("li, .card").querySelector(a):t.querySelector(a);if(!o)return;const c=o.classList.contains("open");"delete"!==i.getAttribute(n)?(s(),c||o.classList.add("open")):o.closest("li").remove()}))},o=e=>{const a=s,t=document.querySelector(e),o=document.querySelector("#catalog-cards"),c=a.filter((e=>0==e.parentId)),r=(e,n,a,t)=>`\n      <a href="${e}" class="category-block__link" data-btn="${n}" data-cat="${t}">\n        <svg class="icon icon--${a}">\n          <use href="./img/svgsprite/sprite.symbol.svg#${a}"></use>\n        </svg>\n      </a>\n    `,l=c.map((e=>(e=>{const n=(t=e,a.filter((e=>e.parentId==t.id))).map((e=>{if("Все категории"!==e.name)return`\n        <li class="catalog-list__sublist__item" data-id="${e.id}">\n          <button type="button" class="category-block category-block--sublist">\n            <span class="category-block__text text-ellipsis">\n            ${e.name}\n              \x3c!-- <span class="category-block__counter">(5)</span> --\x3e\n            </span>\n            <span class="category-block__action-links">\n              ${r("#","edit","edit",e.id)}\n              ${r("#","remove","remove",e.id)}\n            </span>\n          </button>\n        </li>\n      `})).join("");var t;return`\n      <li class="catalog-list__item accordion__item text-ellipsis" data-id="${e.id}">\n          <button type="button" class="category-block accordion__btn" title="Открыть категорию ${e.name}">\n            <span class="expand-icon">\n              <span class="expand-icon__body"></span>\n            </span>\n            <span class="category-block__text text-ellipsis">\n              ${e.name}\n              \x3c!-- <span class="category-block__counter">(5)</span> --\x3e\n            </span>\n            <span class="category-block__action-links">\n              ${r("edit.php","edit","edit")}\n              ${r("delete.php","remove","remove")}\n            </span>\n          </button>\n          ${n.length?`<ul class="catalog-list__sublist accordion__content">${n}</ul>`:""}\n        </li>\n    `})(e))).join("");t.insertAdjacentHTML("beforeend",l),((e,n,a,t)=>{const s='\n            <div class="tooltip tooltip--admin-card">\n                <div class="tooltip__row">\n                  <a href="#" class="button-delete" data-btn="delete">\n                    <svg class="icon icon--close">\n                      <use href="./img/svgsprite/sprite.symbol.svg#close"></use>\n                    </svg>\n                  </a>\n                  <button class="button-dropdownMenu" data-btn="menu">\n                      <svg class="icon icon--menu">\n                        <use href="./img/svgsprite/sprite.symbol.svg#menu"></use>\n                      </svg>\n                  </button>\n                  \n  <ul class="dropdownMenu dropdownMenu--admin-card" role="menu">\n    <li class="dropdownMenu__item">\n      <a class="dropdownMenu__link" href="#!" role="menuitem">\n        <svg class="icon icon--edit">\n          <use href="./img/svgsprite/sprite.symbol.svg#edit"></use>\n        </svg>\n        <span class="dropdownMenu__text">Изменить</span>\n      </a>\n    </li>\n    <li class="dropdownMenu__item">\n      <a class="dropdownMenu__link" href="#!" role="menuitem">\n        <svg class="icon icon--invisible">\n          <use href="./img/svgsprite/sprite.symbol.svg#invisible"></use>\n        </svg>\n        <span class="dropdownMenu__text">Невидимый</span>\n      </a>\n    </li>\n    <li class="dropdownMenu__item">\n      <a class="dropdownMenu__link" href="#!" role="menuitem">\n        <svg class="icon icon--copy">\n          <use href="./img/svgsprite/sprite.symbol.svg#copy"></use>\n        </svg>\n        <span class="dropdownMenu__text">Копировать</span>\n      </a>\n    </li>\n    <li class="dropdownMenu__item">\n      <a class="dropdownMenu__link" href="#!" role="menuitem">\n        <svg class="icon icon--external_link">\n          <use href="./img/svgsprite/sprite.symbol.svg#external_link"></use>\n        </svg>\n        <span class="dropdownMenu__text">Предпросмотр</span>\n      </a>\n    </li>\n    <li class="dropdownMenu__item">\n      <a class="dropdownMenu__link" href="#!" role="menuitem">\n        <svg class="icon icon--delete">\n          <use href="./img/svgsprite/sprite.symbol.svg#delete"></use>\n        </svg>\n        <span class="dropdownMenu__text">Удалить</span>\n      </a>\n    </li>\n  </ul>\n\n                </div>\n            </div>\n    ',o=(e,n)=>`\n     <li href="#" class="admin-card" data-id="2">\n      ${n}\n      <div class="admin-card__img">\n        <img src="./../../img/cats/${e.img}" srcset="./../../img/cats/01@2x.jpg" alt="">\n      </div>\n      \x3c!-- price --\x3e\n      <div class="admin-card__desc">\n        <h4 class="admin-card__title">${e.name}</h4>\n      </div>\n      \x3c!--// price --\x3e\n    </li>\n    `,c=a.filter((e=>{if(!(+e.id<0))return+e.parentId==+t[0].id})).map((e=>o(e,s))).join("");n.insertAdjacentHTML("beforeend",c),e.addEventListener("click",(e=>(e=>{n.innerHTML="";const t=e.target.closest("li").dataset.id,c=a.filter((e=>{if(!(e.id<0))return+e.parentId==+t})).map((e=>o(e,s))).join("");n.insertAdjacentHTML("beforeend",c),i(n,{triggerAttr:"data-btn",menuSelector:".dropdownMenu"})})(e))),i(n,{triggerAttr:"data-btn",menuSelector:".dropdownMenu"})})(t,o,a,c),console.log("hello links"),t.querySelectorAll(".category-block__action-links").forEach((e=>{e.addEventListener("click",(e=>{const n=e.target.closest("[data-btn]");if(!n)return;const t=n.closest(".accordion__item"),s=n.closest(".catalog-list__sublist__item"),i=n.dataset.btn;let o;if(t?o=a.find((e=>+e.id===t.dataset.id)):s&&(o=a.find((e=>+e.id===s.dataset.id))),i&&"remove"===i){const e=a.find((e=>+e.id===o.id));confirm(`Вы действительно хотите удалть категорию ${e.name}?`)&&console.log("okay")}}))})),setTimeout((()=>n("many",e)),.1)},c=()=>{const n=window.location.pathname,a=window.location.search,s=document.querySelector("#dashboard__content");"/page-admin.html"===n&&t(),"?catalog"===a&&((e,n,a,t)=>{const s=e();n&&(s&&(n.innerHTML=""),n&&n.insertAdjacentHTML("beforeend",e()),a("#catalog-list"))})(e,s,o)},r=()=>{const e=s,n=document.querySelector("#nav"),a=n.querySelector("#nav__list"),t=document.querySelector(".catalog-dropdown__background");if(!n||!a||!t)return;const i=e=>e.querySelectorAll(".sub-nav").forEach((e=>e.remove())),o=e.filter((e=>0==+e.parentId));a.innerHTML=o.map((e=>(e=>`\n      <li\n        id="${e.id}"\n        class="nav__block"\n        role="tab"\n        area-selected="false"\n        tabindex="0"\n      >\n        <div class="nav__item">\n        <span class="nav__title">${e.name}</span>\n        </div>\n    \n      </li>\n    `)(e))).join("");const c=a.querySelectorAll(".nav__block");c&&(c.forEach((s=>s.addEventListener("mouseenter",(()=>(s=>{const o=s.id,c=e.filter((e=>+e.parentId==+o));if(!c.length)return;i(a),s.insertAdjacentHTML("beforeend",'\n              <div class="sub-nav">\n                <div class="sub-nav__container container">\n                  <ul class="sub-nav__list"></ul>\n                  <div class="sub-nav__line-separator"></div>\n                  <ul class="sub-sub-nav__list"></ul>\n                </div>\n              </div>\n            ');const r=s.querySelector(".sub-nav__list"),l=s.querySelector(".sub-sub-nav__list");r&&l&&(r.innerHTML=c.map((e=>(e=>`\n        <li class="sub-nav__item">\n          <svg class="sub-nav__icon icon icon--${e.icon}">\n            <use href="./img/svgsprite/sprite.symbol.svg#${e.icon}"></use>\n          </svg>\n          <a href="#" class="sub-nav__link" data-cat="${e.id}">\n            ${e.name}\n          </a>\n          <div class="nav__arrow">\n            <div class="arrow"></div>\n          </div>\n        </li>\n    `)(e))).join(""),t&&t.classList.add("active"),n.addEventListener("mouseleave",(()=>{i(a),t.classList.remove("active")})),r.querySelectorAll("li").forEach((n=>n.addEventListener("mouseenter",(n=>((n,a)=>{const t=n.target.querySelector("[data-cat]");if(!t)return;const s=t.dataset.cat,i=e.filter((e=>+e.parentId==+s));console.log(i),n.target.closest("ul").querySelectorAll("li").forEach((e=>e.classList.remove("active"))),n.target.closest("li").classList.add("active"),a.innerHTML=i.map((e=>(e=>`\n        <li class="sub-sub-nav__item">\n          <a href="#" class="sub-sub-nav__link">\n            ${e.name}\n          </a>\n        </li>\n    `)(e))).join("")})(n,l))))))})(s))))),function(){let e={Android:function(){return console.log(navigator.userAgent),navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iOS/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return e.Android()||e.BlackBerry()||e.iOS()||e.Opera()||e.Windows()}},n=document.querySelector("body");if(e.any()){n.classList.add("touch");let e=document.querySelectorAll(".arrow");for(let n=0;n<e.length;n++){let a=e[n].previousElementSibling,t=e[n].nextElementSibling,s=e[n];a.classList.add("parent"),e[n].addEventListener("click",(function(){t.classList.toggle("open"),s.classList.toggle("active")}))}}else n.classList.add("mouse")}())};document.addEventListener("DOMContentLoaded",(()=>{c(),"/page-admin.html"!==window.location.pathname&&((()=>{const e=document.querySelector(".mobile-nav-btn"),n=document.querySelector(".mobile-nav"),a=document.querySelector(".nav-icon"),t=document.querySelector(".mobile-nav"),s=document.querySelector(".mobile-nav__list");console.log(t),console.log(s),e.onclick=()=>{n.classList.toggle("mobile-nav--open"),a.classList.toggle("nav-icon--active"),document.body.classList.toggle("no-scroll")},s.innerHTML=[{id:"1",name:"Для Женщин",subCats:[{id:"-1",name:"Все категории",icon:"category_all",subSubCats:[]},{id:"7",name:"Сумки",icon:"bag",subSubCats:[{id:"22",name:"Рюкзак"},{id:"23",name:"Клатч"},{id:"24",name:"Портмоне"}]},{id:"8",name:"Очки",icon:"glasses",subSubCats:[{id:"32",name:"Авиаторы"},{id:"33",name:"Круглые"},{id:"34",name:"Коллекционные"}]},{id:"9",name:"Часы",icon:"watch",subSubCats:[{id:"42",name:"На ремешке"},{id:"43",name:"Металлические"},{id:"34",name:"С драгоценными вставками"}]},{id:"10",name:"Бижутерия",icon:"earrings",subSubCats:[{id:"52",name:"Кольца"},{id:"53",name:"Колье"},{id:"54",name:"Серьги"}]},{id:"11",name:"Косметика",icon:"cosmetics",subSubCats:[{id:"62",name:"Крем"},{id:"63",name:"Тушь"},{id:"64",name:"Помада"}]}]},{id:"2",name:"Для Мужчин",subCats:[{id:"-1",name:"Все категории",icon:"category_all",subSubCats:[]},{id:"13",name:"Очки",icon:"glasses_men",subSubCats:[{id:"92",name:"Авиаторы"},{id:"93",name:"Круглые"},{id:"94",name:"Коллекционные"}]},{id:"14",name:"Часы",icon:"watch_man",subSubCats:[{id:"102",name:"На ремешке"},{id:"103",name:"Металлические"},{id:"104",name:"Карманные"}]},{id:"15",name:"Ремни",icon:"belt",subSubCats:[{id:"112",name:"Кожанные"},{id:"113",name:"Классика"},{id:"114",name:"Разные"}]},{id:"16",name:"Галстуки",icon:"necktie",subSubCats:[{id:"122",name:"Классика"},{id:"123",name:"Шёлковые"},{id:"124",name:"Бабочка"}]},{id:"17",name:"Сумки",icon:"suitcase",subSubCats:[{id:"132",name:"Рюкзак"},{id:"133",name:"На плечо"},{id:"134",name:"Дипломат"}]}]},{id:"3",name:"Для Детей",subCats:[{id:"-1",name:"Все категории",icon:"category_all",subSubCats:[]},{id:"18",name:"Игрушки",icon:"toy",subSubCats:[{id:"71",name:"Мягкие"},{id:"75",name:"Пластмассовые"},{id:"76",name:"Деревянные"}]}]}].map((e=>`\n      <li\n        id="${e.id}"\n        class="mobile-nav__item"\n        role="tab"\n        area-selected="false"\n        tabindex="0"\n      >\n      <a href="#" class="mobile-nav__link">\n        <svg class="mobile-nav__icon icon icon--${e.subCats[1].icon}">\n          <use href="./img/svgsprite/sprite.symbol.svg#${e.subCats[1].icon}"></use>\n        </svg> \n        <span class="mobile-nav__subtitle">${e.name}</span>\n      </a>\n\n    </li>\n    `)).join(" "),console.log("")})(),r()),"/shop-single.html"===window.location.pathname&&Fancybox.bind("[data-fancybox]",{Carousel:{transition:"slide",speed:400,thumbs:!1,decelFriction:.1},Images:{zoom:!1},showClass:"f-fadeIn"}),"/index.html"!==window.location.pathname.trim()&&""!==window.location.pathname.trim()||addCatsCards()}))}();